function Banners(){}Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图"):n.createBannerItem()})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗?",confirmCallback:function(){console.log("确定要删除!"),xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功！"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find('span[class="priority"]'),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成！")),s.text("优先级："+e))}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lci5qcyJdLCJuYW1lcyI6WyJCYW5uZXJzIiwicHJvdG90eXBlIiwiYWRkSW1hZ2VTZWxlY3RFdmVudCIsImJhbm5lckl0ZW0iLCJpbWFnZSIsImZpbmQiLCJpbWFnZUlucHV0IiwiY2xpY2siLCJjaGFuZ2UiLCJmaWxlIiwidGhpcyIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwiYXR0ciIsImxvYWREYXRhIiwic2VsZiIsImdldCIsImJhbm5lcnMiLCJpIiwibGVuZ3RoIiwiYmFubmVyIiwiY3JlYXRlQmFubmVySXRlbSIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwiJCIsInByZXBlbmQiLCJhZGRSZW1vdmVCYW5uZXJFdmVudCIsImFkZFNhdmVCYW5uZXJFdmVudCIsImxpc3RlbkFkZEJhbm5lckV2ZW50IiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJiYW5uZXJJZCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImNvbnNvbGUiLCJsb2ciLCJiYW5uZXJfaWQiLCJyZW1vdmUiLCJzaG93U3VjY2VzcyIsInNhdmVCdG4iLCJpbWFnZVRhZyIsInByaW9yaXR5VGFnIiwibGlua3RvVGFnIiwicHJpb3JpdHlTcGFuIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJ2YWwiLCJsaW5rX3RvIiwicGsiLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBSVRBLFFBQVFDLFVBQVVDLG9CQUFzQixTQUFVQyxHQUM5QyxJQUFJQyxFQUFRRCxFQUFXRSxLQUFLLGNBQ3hCQyxFQUFhSCxFQUFXRSxLQUFLLGdCQUVqQ0QsRUFBTUcsTUFBTSxXQUNSRCxFQUFXQyxVQUdmRCxFQUFXRSxPQUFP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LFdBQ3BCdEQsS0FBSzZCLHVCQUNMN0IsS0FBS2MsWUFHVFcsRUFBRSxZQUNnQixJQUFJbkMsU0FDVmdFIiwiZmlsZSI6ImJhbm5lci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXJzKCkge1xyXG5cclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcclxuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcclxuICAgIC8v5Zu+54mH5piv5LiN6IO95omT5byA5paH5Lu26YCJ5oup5qGG55qE77yM5Y+q6IO96YCa6L+HSU5wdXQodHlwZT1maWxlKVxyXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGltYWdlSW5wdXQuY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgJ3VybCc6ICcvY21zL2Jhbm5lcl9saXN0LycsXHJcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFubmVycyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYW5uZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lciA9IGJhbm5lcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVCYW5uZXJJdGVtKGJhbm5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuY3JlYXRlQmFubmVySXRlbSA9IGZ1bmN0aW9uIChiYW5uZXIpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIsIHtcImJhbm5lclwiOiBiYW5uZXJ9KTtcclxuICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG5cclxuICAgIHZhciBiYW5uZXJJdGVtID0gbnVsbDtcclxuICAgIGlmIChiYW5uZXIpIHtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmxhc3RcIik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZChcIi5iYW5uZXItaXRlbTpmaXJzdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmFkZFJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRTYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5saXN0ZW5BZGRCYW5uZXJFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB2YXIgYWRkQnRuID0gJChcIiNhZGQtYmFubmVyLWJ0blwiKTtcclxuICAgIGFkZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoXCIuYmFubmVyLWxpc3QtZ3JvdXBcIik7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IGJhbm5lckxpc3RHcm91cC5jaGlsZHJlbigpLmxlbmd0aDtcclxuICAgICAgICBpZiAobGVuZ3RoID4gNikge1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbygn5pyA5aSa5Y+q6IO95re75YqgNuW8oOi9ruaSreWbvicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRSZW1vdmVCYW5uZXJFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5jbG9zZS1idG4nKTtcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xyXG4gICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgJ3RleHQnOiAn5oKo56Gu5a6a6KaB5Yig6Zmk6L+Z5Liq6L2u5pKt5Zu+5ZCXPycsXHJcbiAgICAgICAgICAgICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnoa7lrpropoHliKDpmaQhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICcvY21zL2RlbGV0ZV9iYW5uZXIvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFubmVyX2lkJzogYmFubmVySWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuWIoOmZpOaIkOWKn++8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkU2F2ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKTtcclxuICAgIHZhciBpbWFnZVRhZyA9IGJhbm5lckl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBsaW5rdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlTcGFuID0gYmFubmVySXRlbS5maW5kKCdzcGFuW2NsYXNzPVwicHJpb3JpdHlcIl0nKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgIHZhciB1cmwgPSAnJztcclxuICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLydcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2FkZF9iYW5uZXIvJ1xyXG4gICAgfVxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoJ3NyYycpO1xyXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5VGFnLnZhbCgpO1xyXG4gICAgICAgIHZhciBsaW5rX3RvID0gbGlua3RvVGFnLnZhbCgpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5L+u5pS55oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJZCA9IHJlc3VsdFsnZGF0YSddWydiYW5uZXJfaWQnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcsYmFubmVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5re75Yqg5a6M5oiQ77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qn77yaXCIgKyBwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XHJcbiAgICB0aGlzLmxvYWREYXRhKCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXJzID0gbmV3IEJhbm5lcnMoKTtcclxuICAgIGJhbm5lcnMucnVuKCk7XHJcbn0pOyJdfQ==
