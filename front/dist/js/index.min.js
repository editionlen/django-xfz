function Banner(){this.bannerWidth=798,this.bannerGroup=$("#banner-group"),this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(n){var e=new Date(n),t=e.getTime(),i=((new Date).getTime()-t)/1e3;return i<60?"刚刚":60<=i&&i<3600?(minutes=parseInt(i/60),minutes+"分钟前"):3600<=i&&i<86400?(hours=parseInt(i/60/60),hours+"小时前"):86400<=i&&i<2592e3?(days=parseInt(i/60/60/24),days+"天前"):e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+e.getMinutes()}}Banner.prototype.initBanner=function(){var n=this,e=n.liList.eq(0).clone(),t=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(e),n.bannerUl.prepend(t),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,e=0;e<n.bannerCount;e++){var t=$("<li></li>");n.pageControl.append(t),0===e&&t.addClass("active")}n.pageControl.css({width:12*n.bannerCount+16+16*(n.bannerCount-1)})},Banner.prototype.animate=function(){var n=this;n.bannerUl.animate({left:-798*n.index},500);var e=n.index;e=0===e?n.bannerCount-1:e===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(e).addClass("active").siblings().removeClass("active")},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.toggleArrow=function(n){var e=this;n?(e.leftArrow.show(),e.rightArrow.show()):(e.leftArrow.hide(),e.rightArrow.hide())},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var t=this;t.pageControl.children("li").each(function(n,e){$(e).click(function(){t.index=n,t.animate()})})},Banner.prototype.run=function(){console.log("abc"),this.initBanner(),this.initPageControl(),this.loop(),this.listenBannerHover(),this.listenArrowClick(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var e=n.data;if(0<e.length){var t=template("news-item",{newses:e});$(".list-inner-group").append(t),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:a,p:1},success:function(n){if(200===n.code){var e=n.data,t=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(t),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJXaWR0aCIsImJhbm5lckdyb3VwIiwiJCIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInRlbXBsYXRlIiwiZGVmYXVsdHMiLCJpbXBvcnRzIiwidGltZVNpbmNlIiwiZGF0ZVZhbHVlIiwiZGF0ZSIsIkRhdGUiLCJkYXRlcyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJob3VycyIsImRheXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF5IiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsImZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsImxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwiaW5pdFBhZ2VDb250cm9sIiwiaSIsImNpcmNsZSIsImFkZENsYXNzIiwiYW5pbWF0ZSIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsaXN0ZW5BcnJvd0NsaWNrIiwiY2xpY2siLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwibG9vcCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJsaXN0ZW5CYW5uZXJIb3ZlciIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImNvbnNvbGUiLCJsb2ciLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsInRwbCIsImxp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QUVObUYsNkJBSVRoRixFQUFFLFlBQ2UsSUFBSUosUUFDVnVFLE9BRUssSUFBSXpELE9BQ1Z5RCIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xyXG4gICAgdGhpcy5iYW5uZXJHcm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5pbmRleCA9IDE7XHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoJy5sZWZ0LWFycm93Jyk7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKFwiLnJpZ2h0LWFycm93XCIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVsLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvdW50ID0gdGhpcy5saUxpc3QubGVuZ3RoO1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmJhbm5lckNvdW50IC0gMSkuY2xvbmUoKTtcclxuICAgIHNlbGYuYmFubmVyVWwuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwucHJlcGVuZChsYXN0QmFubmVyKTtcclxuICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcclxuICAgICAgICBcIndpZHRoXCI6IHNlbGYuYmFubmVyV2lkdGggKiAoc2VsZi5iYW5uZXJDb3VudCArIDIpLFxyXG4gICAgICAgICdsZWZ0JzogLXNlbGYuYmFubmVyV2lkdGhcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuYmFubmVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJDb3VudCAqIDEyICsgOCAqIDIgKyAxNiAqIChzZWxmLmJhbm5lckNvdW50IC0gMSl9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7XCJsZWZ0XCI6IC03OTggKiBzZWxmLmluZGV4fSwgNTAwKTtcclxuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XHJcbiAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQgLSAxO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmluZGV4IC0gMVxyXG4gICAgfVxyXG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lcShpbmRleCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5BcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sZWZ0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyQ291bnQgKiBzZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBzZWxmLmJhbm5lckNvdW50IC0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9KTtcclxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KTtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBpZiAoaXNTaG93KSB7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7Ly8jK2lk5ZCN56ew6KGo56S66YCJ5oup5LqGaWTkuLp4eHjnmoTmjqfku7ZcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPj0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LCAyMDAwKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy/pvKDmoIfnp7vliLBiYW5uZXLkuIrmiafooYznmoTlh73mlbBcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy/pvKDmoIfku45iYW5uZXLnp7votbDkvJrmiafooYznmoTlh73mlbBcclxuICAgICAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgICAgIHNlbGYudG9nZ2xlQXJyb3coZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oXCJsaVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XHJcbiAgICAgICAgJChvYmopLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJhYmNcIik7XHJcbiAgICB0aGlzLmluaXRCYW5uZXIoKTtcclxuICAgIHRoaXMuaW5pdFBhZ2VDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICBzZWxmLmxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcblxyXG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xyXG4gICAgICAgIHZhciBkYXRlcyA9IGRhdGUuZ2V0VGltZSgpO1xyXG4gICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGVzKSAvIDEwMDA7XHJcbiAgICAgICAgaWYgKHRpbWVzdGFtcCA8IDYwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAn5Yia5YiaJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwICYmIHRpbWVzdGFtcCA8IDYwICogNjApIHtcclxuICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGltZXN0YW1wID49IDYwICogNjAgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0KSB7XHJcbiAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCk7XHJcbiAgICAgICAgICAgIHJldHVybiBob3VycyArICflsI/ml7bliY0nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAqIDI0ICYmIHRpbWVzdGFtcCA8IDYwICogNjAgKiAyNCAqIDMwKSB7XHJcbiAgICAgICAgICAgIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwIC8gMjQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF5cyArICflpKnliY0nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICB2YXIgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB5ZWFyICsgJy8nICsgbW9udGggKyAnLycgKyBkYXkgKyAnICcgKyBob3VyICsgJzonICsgbWludXRlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBzZWxmLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3Nlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEJ0bi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGFiR3JvdXAgPSAkKCcubGlzdC10YWInKTtcclxuICAgIHRhYkdyb3VwLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSAxO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzp7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcclxuICAgICAgICAgICAgICAgICdwJzogcGFnZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzTGlzdEdyb3VwID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld3NMaXN0R3JvdXAuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9Y2F0ZWdvcnlfaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xyXG59O1xyXG5cclxuLy/kuIfog73nmoQk5pa55rOV77yM56Gu5L+d6L2u5pKt5Zu+54mH5Yqg6L295a6M5YaN5omn6KGM6L2u5pKtXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuXHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGluZGV4LnJ1bigpO1xyXG59KTsiXX0=
